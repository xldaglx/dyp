window.Bootsy=window.Bootsy||{},Bootsy.Area=function(t){var o=this;this.$el=t,this.unsavedChanges=!1,this.locale=t.data("bootsy-locale")||$("html").attr("lang"),$.fn.wysihtml5.locale.hasOwnProperty(this.locale)||(this.locale="en"),this.options={locale:this.locale,alertUnsavedChanges:t.data("bootsy-alert-unsaved"),uploader:t.data("bootsy-uploader"),color:t.data("bootsy-color"),emphasis:t.data("bootsy-emphasis"),"font-styles":t.data("bootsy-font-styles"),html:t.data("bootsy-html"),image:t.data("bootsy-image"),link:t.data("bootsy-link"),lists:t.data("bootsy-lists"),events:{change:function(){o.unsavedChanges=!0,t.trigger("change")}}}},Bootsy.Area.prototype.unsavedChangesAlert=function(){if(this.unsavedChanges)return $.fn.wysihtml5.locale[this.locale].bootsy.alertUnsaved},Bootsy.Area.prototype.clear=function(){this.editor.clear(),this.setImageGalleryId(""),this.modal.$el.data("gallery-loaded",!1)},Bootsy.Area.prototype.setImageGalleryId=function(t){this.$el.data("gallery-id",t),this.$el.siblings(".bootsy_image_gallery_id").val(t)},Bootsy.Area.prototype.init=function(){this.$el.data("bootsy-initialized")||(!0===this.options.image&&!0===this.options.uploader&&(this.modal=new Bootsy.Modal(this),this.options.image=!1,this.options.customCommand=!0,this.options.customCommandCallback=this.modal.show.bind(this.modal),this.options.customTemplates={customCommand:Bootsy.imageTemplate}),this.editor=this.$el.wysihtml5($.extend(!0,{},Bootsy.options,this.options)).data("wysihtml5").editor,!1!==this.options.alertUnsavedChanges&&(window.onbeforeunload=this.unsavedChangesAlert.bind(this)),this.$el.closest("form").submit(function(){return this.unsavedChanges=!1,!0}.bind(this)),this.$el.data("bootsy-initialized",!0))},Bootsy.Area.prototype.insertImage=function(t){this.editor.currentView.element.focus(),this.caretBookmark&&(this.editor.composer.selection.setBookmark(this.caretBookmark),this.caretBookmark=null),this.editor.composer.commands.exec("insertImage",t)};